apiVersion: kustomize.config.k8s.io/v1beta1
kind: Kustomization

resources:
  - ../default

patches:
  - target:
      kind: Deployment
      name: apicurio-registry-operator
    patch: |-
      - op: add
        path: /spec/template/spec/containers/0/env/-
        value:
          name: JAVA_OPTS_APPEND
          value: "-agentlib:jdwp=transport=dt_socket,server=y,suspend=n,address=5005"
      - op: add
        path: /spec/template/spec/containers/0/env/-
        value:
          name: QUARKUS_VERTX_MAX_EVENT_LOOP_EXECUTE_TIME
          value: "300000" # 5 minutes
      - op: add
        path: /spec/template/spec/containers/0/ports/-
        value:
          name: debug
          containerPort: 5005
          protocol: TCP
